{% extends "bootstrap/base.html" %} {% import "bootstrap/wtf.html" as wtf %} {% block title %}Lean's Blog{% endblock %} {%
block head %} {{ super() }}
<link rel="shortcut icon" href="{{ url_for('static', filename='images/lean-logo.png') }}" type="imgae/x-icon">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
<script src="{{ url_for('static', filename='jquery-3.3.1.js') }}"></script>
<script>
    $(document).ready(function () {
        $("#loginBtn").click(function () {
            $.ajax({
                type: "post",
                url: "login",
                data: $("#loginForm").serialize(),
                dataType: "json",
                cache: false,
                beforeSend: function () {
                    $("#loginWarnText").text("");
                    var pwd = $("#password").val();
                    var email = $("#email").val();
                    if (!email) {
                        $("#loginWarnText").text("邮箱不能为空!");
                        return false;
                    }
                    if (!pwd) {
                        $("#loginWarnText").text("密码不能为空!");
                        return false;
                    }
                },
                success: function (data, status) {
                    if (data.code != 200) {
                        $("#loginWarnText").text(data.message);
                    } else {
                        window.location.reload();
                    }
                }
            });
        });
        $("#logoutBtn").click(function () {
            $.ajax({
                type: "post",
                url: "logout",
                dataType: "json",
                success: function (data, status) {
                    if (data.code != 200) {
                        alert("退出登录失败, 请稍后重试!");
                    } else {
                        window.location.reload();
                    }
                }
            });
        });
    });
</script>
{% endblock %} {% block navbar %}
<div class="container" style="background-color: white;">
    <div class="jumbotron" style="padding-bottom: 10px; padding-top: 20px; margin: 15px 0 0 0; background-color: rgb(31, 207, 207)">
        <img src="{{url_for('static', filename='images/lean-logo.png')}}" class="image-circle img-responsive pull-left" alt="#" style="width: 80px; height: 80px;">
        <h1>Lean's Blog</h1>
        <p>横眉冷却千夫指, 俯首甘为孺子牛！</p>
        <small class="text-muted">昨天</small>
        <span class="label label-warning">迷茫</span>
        <small class="text-muted">今天</small>
        <span class="label label-info">努力</span>
        <small class="text-muted">明天</small>
        <span class="label label-success">收获</span>
        <hr>
        <nav class="nav">
            <ul class="list-inline">
                <li>
                    <a href="#">
                        <strong>关于我</strong>
                    </a>
                </li>
                <li class="dropdown">
                    <a href="#" data-toggle="dropdown">
                        <strong>目录</strong>
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-header">
                            编程语言
                        </li>
                        <li>
                            <a href="#">python</a>
                            <a href="#">javascript</a>
                        </li>
                        <li class="divider"></li>
                        <li class="dropdown-header">
                            编程原理
                        </li>
                        <li>
                            <a href="#">计算机网络</a>
                            <a href="#">系统原理</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#">
                        <strong>杂文</strong>
                        <span class="badge">{{ update_count }}</span>
                    </a>
                </li>
                <li class="pull-right">
                    {% if current_user.is_active %}
                    <span>{{ current_user.nickname }},
                        <a href="#" id="logoutBtn">登出</a>
                    </span>
                    {% else %}
                    <a href="#" data-toggle="modal" data-target="#loginModal" style="text-decoration: underline;">登录</a>
                    {% endif %}
                </li>
            </ul>
        </nav>
    </div>
</div>
<div class="modal fade" id="loginModal" tabIndex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title text-center" id="loginModalLabel">
                    用户登录
                </h4>
            </div>
            <div class="row modal-body" style="padding-top: 5px;">
                <div class="col-md-10 col-md-offset-1">
                    <form class="form" method="POST" id="loginForm">
                        <div style="height: 20px;">
                            <small class="text-danger" id="loginWarnText"></small>
                        </div>
                        <div class="form-group">
                            <input type="text" name="email" class="form-control" id="email" placeholder="请输入邮箱">
                        </div>
                        <div class="form-group">
                            <input type="password" name="password" class="form-control" id="password" placeholder="密码">
                        </div>
                        <div class="col-md-8 col-md-offset-2">
                            <button type="button" class="btn btn-info" id="loginBtn">登录</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} {% block content %}
<div class="container" style="background-color: white; min-height: 100vh; padding: 20px 50px; font-size: 18px;">
    <div class="row">
        <div class="col-sm-12">
            <article>
                <div class="text-center">
                    <h2>学会坚持
                        <small>不浮不躁, 稳步向前!</small>
                    </h2>
                    <div>
                        <small class="text-muted">作者: {{ username }}</small>
                    </div>
                    <div>
                        <small class="text-muted">{{ date_time }}</small>
                    </div>
                </div>
                <hr>
                <p>实现梦想, 勇往直前!</p>
            </article>
        </div>
    </div>
</div>
{% endblock %}